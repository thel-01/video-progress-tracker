<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ML Seminar Progress Tracker</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: white;
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 40px 20px 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .title {
            font-size: 2.5rem;
            font-weight: 700;
            color: #1f2937;
            margin-bottom: 10px;
        }

        .subtitle {
            font-size: 1.1rem;
            color: #4b5563;
            font-weight: 400;
        }

        .youtube-link {
            color: #2563eb;
            text-decoration: none;
            background: #eff6ff;
            padding: 8px 16px;
            border-radius: 12px;
            transition: all 0.3s ease;
            border: 1px solid #bfdbfe;
            display: inline-block;
            font-weight: 600;
        }^1

        .youtube-link:hover {
            background: #dbeafe;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(37, 99, 235, 0.15);
        }

        .progress-section {
            background: rgba(31, 41, 55, 0.66);
            backdrop-filter: blur(8px) saturate(120%);
            border-radius: 28px;
            padding: 30px 40px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 20px;
            position: sticky;
            top: 20px;
            z-index: 100;
            transition: padding 0.3s ease;
        }

        .progress-section.collapsed {
            padding: 20px 40px 25px 40px;
        }

        .progress-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 40px;
            transition: gap 0.3s ease;
        }

        .progress-container.collapsed {
            gap: 0;
        }

        /* Desktop: Show ring, hide bar */
        .progress-ring-container {
            position: relative;
            width: 160px;
            height: 160px;
            flex-shrink: 0;
            display: block;
            transition: opacity 0.3s ease, max-height 0.3s ease, width 0.3s ease;
        }

        .progress-ring-container.collapsed {
            opacity: 0;
            max-height: 0;
            width: 0;
            overflow: hidden;
        }

        .progress-bar-container {
            position: absolute;
            visibility: hidden;
            height: 0;
            overflow: hidden;
            width: 0;
            transition: all 0.3s ease;
        }

        .progress-bar-container.show {
            position: relative;
            visibility: visible;
            height: auto;
            width: 100%;
            overflow: visible;
        }

        .progress-bar-percentage {
            display: none;
            font-size: 2rem;
            font-weight: 800;
            color: #34d399;
            margin-bottom: 8px;
            text-align: center;
        }

        .progress-bar-percentage.show {
            display: block;
        }

        .progress-bar-wrapper {
            width: 100%;
            height: 8px;
            background: #374151;
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, #34d399, #10b981, #34d399);
            background-size: 200% 100%;
            border-radius: 4px;
            animation: breathing-gradient 3s ease infinite;
            transition: width 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .progress-ring {
            transform: rotate(-90deg);
            width: 160px;
            height: 160px;
        }

        .progress-ring-bg {
            fill: transparent;
            stroke: #374151;
            stroke-width: 16;
        }

        .progress-ring-fill {
            fill: transparent;
            stroke: url(#progressGradient);
            stroke-width: 16;
            stroke-linecap: round;
            stroke-dasharray: 452.39;
            stroke-dashoffset: 452.39;
            transition: stroke-dashoffset 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .percentage {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 2.8rem;
            font-weight: 800;
            color: #34d399;
            margin: 0;
            transition: all 0.15s cubic-bezier(0.42, 0, 0.58, 1);
        }

        .stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            flex: 1;
            transition: opacity 0.3s ease, max-height 0.3s ease;
            max-height: 200px;
            overflow: hidden;
        }

        .stats.collapsed {
            max-height: 0;
            opacity: 0;
        }

        .stat {
            text-align: center;
            padding: 20px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .stat-number {
            font-size: 1.8rem;
            font-weight: 700;
            color: #f3f4f6;
            margin-bottom: 5px;
            transition: all 0.15s cubic-bezier(0.42, 0, 0.58, 1);
        }

        .stat-label {
            font-size: 0.9rem;
            color: #9ca3af;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .video-list {
            background: transparent;
            flex: 1;
            display: flex;
            flex-direction: column;
            margin-bottom: 40px;
            margin-left: 30px;
            margin-right: 30px;
        }

        .list-header {
            padding: 10px 30px 20px 30px;
            background: transparent;
            display: flex;
            justify-content: flex-end;
            align-items: center;
            margin-bottom: 10px;
        }

        .video-list-content {
            flex: 1;
        }

        .header-buttons {
            display: flex;
            gap: 15px;
            transition: opacity 0.3s ease;
        }

        .hide-completed-btn {
            background: linear-gradient(135deg, #6b7280, #4b5563);
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
            box-shadow: 0 2px 10px rgba(107, 114, 128, 0.3);
        }

        .hide-completed-btn:hover:not(.disabled) {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(107, 114, 128, 0.4);
            background: linear-gradient(135deg, #4b5563, #374151);
        }

        .hide-completed-btn.active {
            background: linear-gradient(135deg, #10b981, #059669);
            box-shadow: 0 2px 10px rgba(16, 185, 129, 0.3);
        }

        .hide-completed-btn.active:hover {
            background: linear-gradient(135deg, #059669, #047857);
            box-shadow: 0 4px 15px rgba(16, 185, 129, 0.4);
        }

        .hide-completed-btn.disabled {
            background: linear-gradient(135deg, #d1d5db, #9ca3af);
            cursor: not-allowed;
            opacity: 0.5;
            box-shadow: none;
        }

        .clear-all-btn {
            background: linear-gradient(135deg, #f59e0b, #d97706);
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
            box-shadow: 0 2px 10px rgba(245, 158, 11, 0.3);
            margin-left: auto;
        }

        .clear-all-btn:hover:not(.disabled) {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(245, 158, 11, 0.4);
            background: linear-gradient(135deg, #d97706, #b45309);
        }

        .clear-all-btn.disabled {
            background: linear-gradient(135deg, #d1d5db, #9ca3af);
            cursor: not-allowed;
            opacity: 0.5;
            box-shadow: none;
        }

        .list-title {
            display: none;
        }

        .lecture-section {
            background: #f3f4f6;
            padding: 15px 30px;
            border-radius: 20px;
            font-weight: 700;
            font-size: 1rem;
            color: #1f2937;
            transition: all 0.3s ease;
            margin-bottom: 10px;
        }

        .lecture-section:first-of-type {
            margin-top: 0;
        }

        .lecture-section:not(:first-of-type) {
            margin-top: 10px;
        }

        .lecture-section.completed {
            background: linear-gradient(90deg, rgba(16, 185, 129, 0.12), rgba(5, 150, 105, 0.12));
            color: #059669;
        }

        .video-item {
            display: flex;
            align-items: center;
            padding: 15px 30px;
            max-height: 200px;
            opacity: 1;
            overflow: hidden;
            background: white;
            border-radius: 20px;
            transition: max-height 0.25s cubic-bezier(0.42, 0, 0.58, 1),
                        opacity 0.25s cubic-bezier(0.42, 0, 0.58, 1),
                        padding 0.25s cubic-bezier(0.42, 0, 0.58, 1),
                        margin 0.25s cubic-bezier(0.42, 0, 0.58, 1),
                        background 0.2s ease;
        }

        .video-item:hover {
            background: #f9fafb;
        }

        .video-item.completed {
            background: white;
        }

        .video-item.hidden {
            max-height: 0;
            opacity: 0;
            padding-top: 0;
            padding-bottom: 0;
            margin-top: 0;
            margin-bottom: 0;
            border-bottom-width: 0;
        }

        .video-controls {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-right: 20px;
        }

        .checkbox {
            width: 24px;
            height: 24px;
            border: 2px solid #ddd;
            border-radius: 50%;
            position: relative;
            transition: all 0.3s ease;
            flex-shrink: 0;
            cursor: pointer;
        }

        .checkbox:hover {
            border-color: #10b981;
            transform: scale(1.1);
        }

        .checkbox.checked {
            background: linear-gradient(135deg, #10b981, #059669);
            border-color: #10b981;
        }

        .checkbox.checked::after {
            content: '✓';
            position: absolute;
            color: white;
            font-size: 14px;
            font-weight: bold;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        .up-to-here-btn {
            width: 28px;
            height: 28px;
            border: 2px solid #ddd;
            border-radius: 6px;
            background: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            position: relative;
            flex-shrink: 0;
        }

        .up-to-here-btn:hover {
            border-color: #10b981;
            background: #10b981;
            transform: scale(1.1);
        }

        .up-to-here-btn:hover .arrow {
            color: white;
        }

        .arrow {
            font-size: 14px;
            color: #666;
            transition: color 0.3s ease;
            font-weight: bold;
        }

        .up-to-here-btn.active {
            background: linear-gradient(135deg, #10b981, #059669);
            border-color: #10b981;
        }

        .up-to-here-btn.active .arrow {
            color: white;
        }

        .video-info {
            flex: 1;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .video-title {
            font-weight: 600;
            color: #1f2937;
            font-size: 1rem;
        }

        .video-item.completed .video-title {
            color: #059669;
        }

        .video-duration {
            font-size: 0.9rem;
            color: #4b5563;
            font-weight: 500;
            font-family: 'Monaco', monospace;
        }

        /* Add keyframes for shimmer effect */
        @keyframes breathing-gradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        @media (max-width: 768px) {
            .container {
                padding: 20px 10px;
            }

            .progress-section {
                padding: 15px 15px;
                margin-left: 5px;
                margin-right: 5px;
            }

            .progress-section.collapsed {
                padding: 15px 15px 18px 15px;
            }

            .title {
                font-size: 2rem;
            }

            .progress-container {
                flex-direction: column;
                gap: 15px;
            }

            .progress-container.collapsed {
                gap: 0;
            }

            /* Hide ring, show bar on mobile */
            .progress-ring-container {
                position: absolute;
                visibility: hidden;
                height: 0;
                width: 0;
                overflow: hidden;
            }

            .progress-bar-container {
                position: relative;
                visibility: visible;
                height: auto;
                width: 100%;
                overflow: visible;
            }

            .progress-bar-percentage {
                display: block;
                font-size: 2rem;
                font-weight: 800;
                color: #34d399;
                margin-bottom: 8px;
                text-align: center;
            }

            .progress-bar-wrapper {
                width: 100%;
                height: 8px;
                background: #374151;
                border-radius: 4px;
                overflow: hidden;
            }

            .progress-bar-fill {
                height: 100%;
                background: linear-gradient(90deg, #34d399, #10b981, #34d399);
                background-size: 200% 100%;
                border-radius: 4px;
                animation: breathing-gradient 3s ease infinite;
                transition: width 0.8s cubic-bezier(0.4, 0, 0.2, 1);
            }

            .percentage {
                font-size: 1.8rem;
                position: static;
                transform: none;
            }

            .stats {
                grid-template-columns: 1fr 1fr;
                width: 100%;
                gap: 10px;
                margin-top: 15px;
                max-height: 100px;
                overflow: hidden;
            }

            .stats.collapsed {
                max-height: 0;
                margin-top: 0;
                opacity: 0;
            }

            .stat {
                padding: 12px;
            }

            .stat-number {
                font-size: 1.3rem;
            }

            .stat-label {
                font-size: 0.75rem;
            }

            .video-list {
                margin-left: 5px;
                margin-right: 5px;
            }

            .video-item {
                padding: 15px 20px;
            }

            .video-info {
                flex-direction: column;
                align-items: flex-start;
                gap: 5px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1 class="title">Track your progress</h1>
            <p class="subtitle"><a href="https://www.youtube.com/playlist?list=PLiP3SpUod5Blbuy0UZwjiE8uip2yQaBCz" target="_blank" class="youtube-link">YouTube: 'Big Data & Statistical Learning in R'</a></p>
        </div>

        <div class="progress-section">
            <div class="progress-container">
                <div class="progress-ring-container">
                    <svg class="progress-ring" viewBox="0 0 160 160">
                        <defs>
                            <linearGradient id="progressGradient" x1="0%" y1="0%" x2="100%" y2="0%">
                                <stop offset="0%" style="stop-color:#34d399"/>
                                <stop offset="100%" style="stop-color:#10b981"/>
                            </linearGradient>
                        </defs>
                        <circle class="progress-ring-bg" cx="80" cy="80" r="72"/>
                        <circle class="progress-ring-fill" id="progressRing" cx="80" cy="80" r="72"/>
                    </svg>
                    <span class="percentage" id="percentage">0%</span>
                </div>

                <div class="progress-bar-container">
                    <span class="progress-bar-percentage" id="percentageBar">0%</span>
                    <div class="progress-bar-wrapper">
                        <div class="progress-bar-fill" id="progressBar"></div>
                    </div>
                </div>

                <div class="stats">
                    <div class="stat">
                        <div class="stat-number" id="completedTime">0h</div>
                        <div class="stat-label">Completed</div>
                    </div>
                    <div class="stat">
                        <div class="stat-number" id="remainingTime">14:05h</div>
                        <div class="stat-label">Remaining</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="video-list" id="videoList">
            <div class="list-header">
                <h3 class="list-title">Progress</h3>
                <div class="header-buttons">
                    <button class="hide-completed-btn" id="hideCompletedBtn">Hide Completed</button>
                    <button class="clear-all-btn" id="clearAllBtn">Clear All</button>
                </div>
            </div>
            
            <div class="video-list-content">
            <div class="lecture-section" data-lecture="1">Lecture 1</div>
            <div class="video-item" data-index="0" data-lecture="1">
                <div class="video-controls">
                    <div class="checkbox" data-index="0"></div>
                    <div class="up-to-here-btn" data-index="0" title="Mark this and all previous as complete">
                        <span class="arrow">↑</span>
                    </div>
                </div>
                <div class="video-info">
                    <span class="video-title">0: Roadmap</span>
                    <span class="video-duration">8:22</span>
                </div>
            </div>
            <div class="video-item" data-index="1" data-lecture="1">
                <div class="video-controls">
                    <div class="checkbox" data-index="1"></div>
                    <div class="up-to-here-btn" data-index="1" title="Mark this and all previous as complete">
                        <span class="arrow">↑</span>
                    </div>
                </div>
                <div class="video-info">
                    <span class="video-title">1: Intro to R</span>
                    <span class="video-duration">38:22</span>
                </div>
            </div>
            <div class="video-item" data-index="2" data-lecture="1">
                <div class="video-controls">
                    <div class="checkbox" data-index="2"></div>
                    <div class="up-to-here-btn" data-index="2" title="Mark this and all previous as complete">
                        <span class="arrow">↑</span>
                    </div>
                </div>
                <div class="video-info">
                    <span class="video-title">2: Using Commands</span>
                    <span class="video-duration">19:45</span>
                </div>
            </div>
            <div class="video-item" data-index="3" data-lecture="1">
                <div class="video-controls">
                    <div class="checkbox" data-index="3"></div>
                    <div class="up-to-here-btn" data-index="3" title="Mark this and all previous as complete">
                        <span class="arrow">↑</span>
                    </div>
                </div>
                <div class="video-info">
                    <span class="video-title">3: Using Commands (cont'd)</span>
                    <span class="video-duration">25:39</span>
                </div>
            </div>
            <div class="video-item" data-index="4" data-lecture="1">
                <div class="video-controls">
                    <div class="checkbox" data-index="4"></div>
                    <div class="up-to-here-btn" data-index="4" title="Mark this and all previous as complete">
                        <span class="arrow">↑</span>
                    </div>
                </div>
                <div class="video-info">
                    <span class="video-title">4: Die Simulator</span>
                    <span class="video-duration">36:54</span>
                </div>
            </div>
            <div class="video-item" data-index="5" data-lecture="1">
                <div class="video-controls">
                    <div class="checkbox" data-index="5"></div>
                    <div class="up-to-here-btn" data-index="5" title="Mark this and all previous as complete">
                        <span class="arrow">↑</span>
                    </div>
                </div>
                <div class="video-info">
                    <span class="video-title">5: Card Shuffler and Lists</span>
                    <span class="video-duration">29:08</span>
                </div>
            </div>
            <div class="video-item" data-index="6" data-lecture="1">
                <div class="video-controls">
                    <div class="checkbox" data-index="6"></div>
                    <div class="up-to-here-btn" data-index="6" title="Mark this and all previous as complete">
                        <span class="arrow">↑</span>
                    </div>
                </div>
                <div class="video-info">
                    <span class="video-title">6: Card Shuffler & Data Frames</span>
                    <span class="video-duration">22:42</span>
                </div>
            </div>
            <div class="video-item" data-index="7" data-lecture="1">
                <div class="video-controls">
                    <div class="checkbox" data-index="7"></div>
                    <div class="up-to-here-btn" data-index="7" title="Mark this and all previous as complete">
                        <span class="arrow">↑</span>
                    </div>
                </div>
                <div class="video-info">
                    <span class="video-title">7: Element Extraction</span>
                    <span class="video-duration">21:50</span>
                </div>
            </div>
            <div class="video-item" data-index="8" data-lecture="1">
                <div class="video-controls">
                    <div class="checkbox" data-index="8"></div>
                    <div class="up-to-here-btn" data-index="8" title="Mark this and all previous as complete">
                        <span class="arrow">↑</span>
                    </div>
                </div>
                <div class="video-info">
                    <span class="video-title">8: Logical Operators</span>
                    <span class="video-duration">33:41</span>
                </div>
            </div>
            <div class="video-item" data-index="9" data-lecture="1">
                <div class="video-controls">
                    <div class="checkbox" data-index="9"></div>
                    <div class="up-to-here-btn" data-index="9" title="Mark this and all previous as complete">
                        <span class="arrow">↑</span>
                    </div>
                </div>
                <div class="video-info">
                    <span class="video-title">9: One-arm bandit</span>
                    <span class="video-duration">41:23</span>
                </div>
            </div>

            <div class="lecture-section" data-lecture="2">Lecture 2</div>
            <div class="video-item" data-index="10" data-lecture="2">
                <div class="video-controls">
                    <div class="checkbox" data-index="10"></div>
                    <div class="up-to-here-btn" data-index="10" title="Mark this and all previous as complete">
                        <span class="arrow">↑</span>
                    </div>
                </div>
                <div class="video-info">
                    <span class="video-title">1: Matrix</span>
                    <span class="video-duration">27:07</span>
                </div>
            </div>
            <div class="video-item" data-index="11" data-lecture="2">
                <div class="video-controls">
                    <div class="checkbox" data-index="11"></div>
                    <div class="up-to-here-btn" data-index="11" title="Mark this and all previous as complete">
                        <span class="arrow">↑</span>
                    </div>
                </div>
                <div class="video-info">
                    <span class="video-title">2: Plots</span>
                    <span class="video-duration">38:06</span>
                </div>
            </div>
            <div class="video-item" data-index="12" data-lecture="2">
                <div class="video-controls">
                    <div class="checkbox" data-index="12"></div>
                    <div class="up-to-here-btn" data-index="12" title="Mark this and all previous as complete">
                        <span class="arrow">↑</span>
                    </div>
                </div>
                <div class="video-info">
                    <span class="video-title">3: Loops & Monte Carlo Intro</span>
                    <span class="video-duration">35:30</span>
                </div>
            </div>
            <div class="video-item" data-index="13" data-lecture="2">
                <div class="video-controls">
                    <div class="checkbox" data-index="13"></div>
                    <div class="up-to-here-btn" data-index="13" title="Mark this and all previous as complete">
                        <span class="arrow">↑</span>
                    </div>
                </div>
                <div class="video-info">
                    <span class="video-title">4: Monte Carlo in Mannheim</span>
                    <span class="video-duration">23:26</span>
                </div>
            </div>
            <div class="video-item" data-index="14" data-lecture="2">
                <div class="video-controls">
                    <div class="checkbox" data-index="14"></div>
                    <div class="up-to-here-btn" data-index="14" title="Mark this and all previous as complete">
                        <span class="arrow">↑</span>
                    </div>
                </div>
                <div class="video-info">
                    <span class="video-title">5: Statistical Models</span>
                    <span class="video-duration">20:01</span>
                </div>
            </div>
            <div class="video-item" data-index="15" data-lecture="2">
                <div class="video-controls">
                    <div class="checkbox" data-index="15"></div>
                    <div class="up-to-here-btn" data-index="15" title="Mark this and all previous as complete">
                        <span class="arrow">↑</span>
                    </div>
                </div>
                <div class="video-info">
                    <span class="video-title">6: Gauss-Markov Theorem</span>
                    <span class="video-duration">46:35</span>
                </div>
            </div>

            <div class="lecture-section" data-lecture="3">Lecture 3</div>
            <div class="video-item" data-index="16" data-lecture="3">
                <div class="video-controls">
                    <div class="checkbox" data-index="16"></div>
                    <div class="up-to-here-btn" data-index="16" title="Mark this and all previous as complete">
                        <span class="arrow">↑</span>
                    </div>
                </div>
                <div class="video-info">
                    <span class="video-title">1: Assignment Solution</span>
                    <span class="video-duration">33:17</span>
                </div>
            </div>
            <div class="video-item" data-index="17" data-lecture="3">
                <div class="video-controls">
                    <div class="checkbox" data-index="17"></div>
                    <div class="up-to-here-btn" data-index="17" title="Mark this and all previous as complete">
                        <span class="arrow">↑</span>
                    </div>
                </div>
                <div class="video-info">
                    <span class="video-title">2: Functional Specification</span>
                    <span class="video-duration">42:37</span>
                </div>
            </div>
            <div class="video-item" data-index="18" data-lecture="3">
                <div class="video-controls">
                    <div class="checkbox" data-index="18"></div>
                    <div class="up-to-here-btn" data-index="18" title="Mark this and all previous as complete">
                        <span class="arrow">↑</span>
                    </div>
                </div>
                <div class="video-info">
                    <span class="video-title">3: MSE Using Validation Sets</span>
                    <span class="video-duration">29:44</span>
                </div>
            </div>
            <div class="video-item" data-index="19" data-lecture="3">
                <div class="video-controls">
                    <div class="checkbox" data-index="19"></div>
                    <div class="up-to-here-btn" data-index="19" title="Mark this and all previous as complete">
                        <span class="arrow">↑</span>
                    </div>
                </div>
                <div class="video-info">
                    <span class="video-title">4: MSE using Cross Validation</span>
                    <span class="video-duration">47:40</span>
                </div>
            </div>

            <div class="lecture-section" data-lecture="4">Lecture 4</div>
            <div class="video-item" data-index="20" data-lecture="4">
                <div class="video-controls">
                    <div class="checkbox" data-index="20"></div>
                    <div class="up-to-here-btn" data-index="20" title="Mark this and all previous as complete">
                        <span class="arrow">↑</span>
                    </div>
                </div>
                <div class="video-info">
                    <span class="video-title">1: Best Subset Selection</span>
                    <span class="video-duration">23:48</span>
                </div>
            </div>
            <div class="video-item" data-index="21" data-lecture="4">
                <div class="video-controls">
                    <div class="checkbox" data-index="21"></div>
                    <div class="up-to-here-btn" data-index="21" title="Mark this and all previous as complete">
                        <span class="arrow">↑</span>
                    </div>
                </div>
                <div class="video-info">
                    <span class="video-title">2: Model Selection Methods</span>
                    <span class="video-duration">42:12</span>
                </div>
            </div>
            <div class="video-item" data-index="22" data-lecture="4">
                <div class="video-controls">
                    <div class="checkbox" data-index="22"></div>
                    <div class="up-to-here-btn" data-index="22" title="Mark this and all previous as complete">
                        <span class="arrow">↑</span>
                    </div>
                </div>
                <div class="video-info">
                    <span class="video-title">3: Shrinkage methods</span>
                    <span class="video-duration">1:19:04</span>
                </div>
            </div>
            <div class="video-item" data-index="23" data-lecture="4">
                <div class="video-controls">
                    <div class="checkbox" data-index="23"></div>
                    <div class="up-to-here-btn" data-index="23" title="Mark this and all previous as complete">
                        <span class="arrow">↑</span>
                    </div>
                </div>
                <div class="video-info">
                    <span class="video-title">4: Tree-based models</span>
                    <span class="video-duration">1:18:57</span>
                </div>
            </div>
            </div>
        </div>
    </div>

    <script>
        const totalVideos = 24;
        let completedVideos = 0;
        let completedState = new Array(totalVideos).fill(false);

        // Video durations in seconds
        const videoDurations = [
            502, 2302, 1185, 1539, 2214, 1748, 1362, 1310, 2021, 2483, 1627, 2286, 
            2130, 1406, 1201, 2795, 1997, 2557, 1784, 2860, 1428, 2532, 4744, 4737
        ];

        function timeToSeconds(timeStr) {
            const parts = timeStr.split(':');
            if (parts.length === 2) {
                return parseInt(parts[0]) * 60 + parseInt(parts[1]);
            } else if (parts.length === 3) {
                return parseInt(parts[0]) * 3600 + parseInt(parts[1]) * 60 + parseInt(parts[2]);
            }
            return 0;
        }

        function secondsToTime(seconds) {
            const hours = Math.floor(seconds / 3600);
            const minutes = Math.floor((seconds % 3600) / 60);
            
            if (hours > 0) {
                return `${hours}:${minutes.toString().padStart(2, '0')}h`;
            } else {
                return `${minutes}m`;
            }
        }

        // DOM elements
        const percentageEl = document.getElementById('percentage');
        const progressRingEl = document.getElementById('progressRing');
        const completedTimeEl = document.getElementById('completedTime');
        const remainingTimeEl = document.getElementById('remainingTime');
        const videoListEl = document.getElementById('videoList');
        const clearAllBtnEl = document.getElementById('clearAllBtn');
        const hideCompletedBtnEl = document.getElementById('hideCompletedBtn');
        const headerButtonsEl = document.querySelector('.header-buttons');
        const progressSectionEl = document.querySelector('.progress-section');
        const percentageBarEl = document.getElementById('percentageBar');
        const progressBarEl = document.getElementById('progressBar');
        const videoItems = document.querySelectorAll('.video-item');
        const lectureSections = document.querySelectorAll('.lecture-section');

        let hideCompleted = false;

        // Update SVG viewBox and circles for mobile
        function updateSVGForMobile() {
            const isMobile = window.innerWidth <= 768;
            const svg = document.querySelector('.progress-ring');
            const bgCircle = document.querySelector('.progress-ring-bg');
            const fillCircle = document.querySelector('.progress-ring-fill');
            
            if (!isMobile) {
                // Desktop uses ring
                svg.setAttribute('viewBox', '0 0 160 160');
                bgCircle.setAttribute('cx', '80');
                bgCircle.setAttribute('cy', '80');
                bgCircle.setAttribute('r', '72');
                bgCircle.setAttribute('stroke-width', '16');
                fillCircle.setAttribute('cx', '80');
                fillCircle.setAttribute('cy', '80');
                fillCircle.setAttribute('r', '72');
                fillCircle.setAttribute('stroke-width', '16');
            }
            // Mobile uses progress bar (CSS handles visibility)
        }

        // Call on load and resize
        updateSVGForMobile();
        window.addEventListener('resize', updateSVGForMobile);

        // Scroll collapse functionality (mobile and desktop)
        let lastScrollY = 0;
        let manuallyExpanded = false;
        let scrollTimeout = null;
        let isCollapsed = false;
        const isMobile = () => window.innerWidth <= 768;

        const progressSection = document.querySelector('.progress-section');
        const progressContainer = document.querySelector('.progress-container');
        const stats = document.querySelector('.stats');
        const progressRingContainer = document.querySelector('.progress-ring-container');
        const progressBarContainer = document.querySelector('.progress-bar-container');
        const progressBarPercentage = document.querySelector('.progress-bar-percentage');

        function collapseCard() {
            if (isCollapsed) return;
            isCollapsed = true;

            progressSection.classList.add('collapsed');
            progressContainer.classList.add('collapsed');
            stats.classList.add('collapsed');

            // Desktop: switch from ring to bar
            if (!isMobile()) {
                progressRingContainer.classList.add('collapsed');
                progressBarContainer.classList.add('show');
                progressBarPercentage.classList.add('show');
            }
        }

        function expandCard() {
            if (!isCollapsed) return;
            isCollapsed = false;

            progressSection.classList.remove('collapsed');
            progressContainer.classList.remove('collapsed');
            stats.classList.remove('collapsed');

            // Desktop: switch back to ring
            if (!isMobile()) {
                progressRingContainer.classList.remove('collapsed');
                progressBarContainer.classList.remove('show');
                progressBarPercentage.classList.remove('show');
            }
        }

        window.addEventListener('scroll', () => {
            if (manuallyExpanded) return;

            const currentScrollY = window.scrollY;
            const threshold = isMobile() ? 50 : 200;
            const deadzone = 20; // Pixels of buffer zone to prevent flickering

            // Clear any pending timeout
            if (scrollTimeout) {
                clearTimeout(scrollTimeout);
            }

            // Debounce the state change
            scrollTimeout = setTimeout(() => {
                // Only change state if we're clearly past the threshold + deadzone
                if (currentScrollY > threshold + deadzone && !isCollapsed) {
                    collapseCard();
                } else if (currentScrollY < threshold - deadzone && isCollapsed) {
                    expandCard();
                }

                lastScrollY = currentScrollY;
            }, 50); // 50ms debounce
        });

        // Tap/click to expand collapsed card
        progressSection.addEventListener('click', () => {
            if (isCollapsed) {
                expandCard();
                manuallyExpanded = true;

                // Reset manuallyExpanded flag on next scroll with tolerance
                const resetExpanded = () => {
                    manuallyExpanded = false;
                    window.removeEventListener('scroll', resetExpanded);
                };

                // Add 500ms delay before listening for scroll events
                setTimeout(() => {
                    window.addEventListener('scroll', resetExpanded, { once: true });
                }, 500);
            }
        });

        // Lecture groupings - which videos belong to which lecture
        const lectureGroups = {
            1: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9],
            2: [10, 11, 12, 13, 14, 15],
            3: [16, 17, 18, 19],
            4: [20, 21, 22, 23]
        };

        // Load saved progress
        loadProgress();
        
        // Initialize button visibility
        updateButtonVisibility();
        
        // Initialize progress display on load
        updateProgress();

        // Hide completed toggle
        hideCompletedBtnEl.addEventListener('click', () => {
            if (completedVideos === 0) return; // Don't do anything if disabled

            hideCompleted = !hideCompleted;
            updateVideoVisibility();

            if (hideCompleted) {
                hideCompletedBtnEl.textContent = 'Show All';
                hideCompletedBtnEl.classList.add('active');
            } else {
                hideCompletedBtnEl.textContent = 'Hide Completed';
                hideCompletedBtnEl.classList.remove('active');
            }
        });

        // Clear all selections
        clearAllBtnEl.addEventListener('click', () => {
            if (completedVideos === 0) return; // Don't do anything if disabled
            clearAllSelections();
        });

        // Add click handlers to video items
        videoItems.forEach((item, index) => {
            // Click handler for checkbox (individual toggle)
            const checkbox = item.querySelector('.checkbox');
            checkbox.addEventListener('click', (e) => {
                e.stopPropagation();
                toggleVideoCompletion(index);
            });
            
            // Click handler for up-to-here button (mark all up to and including this one)
            const upToHereBtn = item.querySelector('.up-to-here-btn');
            upToHereBtn.addEventListener('click', (e) => {
                e.stopPropagation();
                markUpToHere(index);
            });
            
            // Click handler for video title area (individual toggle)
            const videoInfo = item.querySelector('.video-info');
            videoInfo.addEventListener('click', () => {
                toggleVideoCompletion(index);
            });
        });

        function updateLectureStatus() {
            // Check each lecture to see if all videos are completed
            Object.keys(lectureGroups).forEach(lectureNum => {
                const videoIndices = lectureGroups[lectureNum];
                const allCompleted = videoIndices.every(index => completedState[index]);
                
                const lectureSection = document.querySelector(`.lecture-section[data-lecture="${lectureNum}"]`);
                if (allCompleted) {
                    lectureSection.classList.add('completed');
                } else {
                    lectureSection.classList.remove('completed');
                }
            });
        }

        function updateButtonVisibility() {
            if (completedVideos > 0) {
                hideCompletedBtnEl.classList.remove('disabled');
                clearAllBtnEl.classList.remove('disabled');
                hideCompletedBtnEl.disabled = false;
                clearAllBtnEl.disabled = false;
            } else {
                hideCompletedBtnEl.classList.add('disabled');
                clearAllBtnEl.classList.add('disabled');
                hideCompletedBtnEl.disabled = true;
                clearAllBtnEl.disabled = true;
            }
        }

        function updateVideoVisibility() {
            videoItems.forEach((item, index) => {
                if (hideCompleted && completedState[index]) {
                    item.classList.add('hidden');
                } else {
                    item.classList.remove('hidden');
                }
            });
            
            // Handle lecture section visibility
            lectureSections.forEach(section => {
                const lectureNum = parseInt(section.getAttribute('data-lecture'));
                const videoIndices = lectureGroups[lectureNum];
                const hasVisibleVideos = videoIndices.some(index => !videoItems[index].classList.contains('hidden'));
                
                // Section is always visible, but we could add logic here if needed
            });
        }

        function clearAllSelections() {
            // Reset all completed states
            for (let i = 0; i < totalVideos; i++) {
                if (completedState[i]) {
                    completedState[i] = false;
                    
                    const videoItem = videoItems[i];
                    const checkbox = videoItem.querySelector('.checkbox');
                    
                    videoItem.classList.remove('completed');
                    checkbox.classList.remove('checked');
                }
            }
            
            completedVideos = 0;
            updateProgress();
            updateVideoVisibility();
            updateLectureStatus();
            updateButtonVisibility();
            saveProgress();
        }

        function markUpToHere(targetIndex) {
            // Mark all videos from 0 to targetIndex as completed
            for (let i = 0; i <= targetIndex; i++) {
                if (!completedState[i]) {
                    completedState[i] = true;
                    
                    const videoItem = videoItems[i];
                    const checkbox = videoItem.querySelector('.checkbox');
                    
                    videoItem.classList.add('completed');
                    checkbox.classList.add('checked');
                    completedVideos++;
                }
            }
            
            updateProgress();
            updateVideoVisibility();
            updateLectureStatus();
            updateButtonVisibility();
            saveProgress();
        }

        function toggleVideoCompletion(index) {
            completedState[index] = !completedState[index];
            
            const videoItem = videoItems[index];
            const checkbox = videoItem.querySelector('.checkbox');
            
            if (completedState[index]) {
                videoItem.classList.add('completed');
                checkbox.classList.add('checked');
                completedVideos++;
            } else {
                videoItem.classList.remove('completed');
                checkbox.classList.remove('checked');
                completedVideos--;
            }
            
            updateProgress();
            updateVideoVisibility();
            updateLectureStatus();
            updateButtonVisibility();
            saveProgress();
        }

        function animateNumber(element, targetValue, isPercentage = false) {
            if (!element) return; // Safety check
            
            const currentText = element.textContent;
            const currentValue = isPercentage 
                ? parseInt(currentText) 
                : parseTimeToSeconds(currentText);
            const target = isPercentage ? targetValue : targetValue;
            
            const duration = 150; // ms
            const steps = 10;
            const stepDuration = duration / steps;
            const increment = (target - currentValue) / steps;
            
            let current = currentValue;
            let step = 0;
            
            const timer = setInterval(() => {
                step++;
                current += increment;
                
                if (step >= steps) {
                    clearInterval(timer);
                    if (isPercentage) {
                        element.textContent = `${Math.round(target)}%`;
                    } else {
                        element.textContent = secondsToTime(Math.round(target));
                    }
                } else {
                    if (isPercentage) {
                        element.textContent = `${Math.round(current)}%`;
                    } else {
                        element.textContent = secondsToTime(Math.round(current));
                    }
                }
            }, stepDuration);
        }

        function parseTimeToSeconds(timeStr) {
            // Parse formats like "2:15h" or "45m"
            if (timeStr.includes('h')) {
                const parts = timeStr.replace('h', '').split(':');
                if (parts.length === 2) {
                    return parseInt(parts[0]) * 3600 + parseInt(parts[1]) * 60;
                }
                return parseInt(parts[0]) * 3600;
            } else if (timeStr.includes('m')) {
                return parseInt(timeStr.replace('m', '')) * 60;
            }
            return 0;
        }

        function updateProgress() {
            const percentage = Math.round((completedVideos / totalVideos) * 100);
            
            // Calculate completed and remaining time
            let completedSeconds = 0;
            completedState.forEach((isCompleted, index) => {
                if (isCompleted) {
                    completedSeconds += videoDurations[index];
                }
            });
            
            const totalSeconds = videoDurations.reduce((sum, duration) => sum + duration, 0);
            const remainingSeconds = totalSeconds - completedSeconds;
            
            // Animate percentage
            animateNumber(percentageEl, percentage, true);
            animateNumber(percentageBarEl, percentage, true);
            
            // Update progress ring (desktop)
            const radius = 72;
            const circumference = 2 * Math.PI * radius;
            const offset = circumference - (percentage / 100) * circumference;
            progressRingEl.style.strokeDashoffset = offset;
            
            // Update progress bar (mobile)
            progressBarEl.style.width = `${percentage}%`;
            
            // Animate time stats
            animateNumber(completedTimeEl, completedSeconds, false);
            animateNumber(remainingTimeEl, remainingSeconds, false);
        }

        function saveProgress() {
            const progressData = {
                completedState: completedState,
                completedVideos: completedVideos
            };
            // Save to localStorage (browser storage)
            localStorage.setItem('videoProgressTracker', JSON.stringify(progressData));
        }

        function loadProgress() {
            // Load from localStorage (browser storage)
            const savedData = localStorage.getItem('videoProgressTracker');
            if (savedData) {
                try {
                    const progressData = JSON.parse(savedData);
                    completedState = progressData.completedState || new Array(totalVideos).fill(false);
                    completedVideos = progressData.completedVideos || 0;
                    
                    // Apply loaded state to UI
                    completedState.forEach((isCompleted, index) => {
                        if (isCompleted) {
                            const videoItem = videoItems[index];
                            const checkbox = videoItem.querySelector('.checkbox');
                            videoItem.classList.add('completed');
                            checkbox.classList.add('checked');
                        }
                    });
                } catch (error) {
                    console.log('Error loading saved progress, starting fresh');
                    completedState = new Array(totalVideos).fill(false);
                    completedVideos = 0;
                }
            }
            updateProgress();
            updateLectureStatus();
            updateButtonVisibility();
        }
    </script>
</body>
</html>
